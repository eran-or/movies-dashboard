(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){e.exports=n(50)},44:function(e,t,n){},46:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(6),l=n.n(r),c=n(14),i=n(8),s=n(29),d=n(22),u=n.n(d),m="RECEIVE_MOVIES",v="REQUEST_MOVIES",f={movies:[]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return u()(e,{isFetching:{$set:!0},didInvalidate:{$set:!1}});case m:return u()(e,{movies:{$set:t.movies},isFetching:{$set:!1},didInvalidate:{$set:!1},lastUpdated:{$set:t.receivedAt}});default:return e}},h=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c,g=(n(42),n(44),n(52)),E=n(54),b=n(53),M=n(32),w=n(9),y=n(17),O=n(10),x=n(11),N=n(15),C=n(12),T=n(16);n(46);function j(e){return{type:m,movies:e.map(function(e){return e.Title=e.Title.replace(/[^\w* -]/g,"").toLowerCase().replace(/\b\w/g,function(e){return e.toUpperCase()}),e}),receivedAt:Date.now()}}var k=function(e){return function(e){e({type:v});var t=[];return fetch("https://api.themoviedb.org/3/discover/movie?api_key=9dc58f8026e43c67f75c2a110b7d6162").then(function(e){return e.json()}).then(function(e){return e.results.map(function(e,n){return fetch("".concat("http://www.omdbapi.com/?&plot=full&apikey=bc2b28c9&t=").concat(e.title)).then(function(e){return e.json()}).then(function(e){return t.push(e)}).catch(function(e){return console.log(e)})})}).then(function(n){Promise.all(n).then(function(n){e(j(t))})}).catch(function(e){return console.log(e)})}},Y=function(e){var t=e.movie,n=[{classname:"edit-btn mr-1",handler:e.onEdit,text:"Edit"},{classname:"delete-btn",handler:e.onDelete,text:"Delete"}];return o.a.createElement("div",{className:"movie-box d-flex align-items-center align-items-sm-start rounded border flex-column mx-auto mb-2 flex-sm-row"},o.a.createElement("img",{src:t.Poster,alt:"",className:"rounded scaleDown"}),o.a.createElement("div",{className:"d-flex flex-column col-12 py-2 movie-info col-sm-7"},o.a.createElement("h5",null,t.Title),o.a.createElement("p",{className:"m-0"},o.a.createElement("strong",null,"Year:"),t.Year),o.a.createElement("p",{className:"m-0"},o.a.createElement("strong",null,"Runtime:"),t.Runtime),o.a.createElement("p",{className:"m-0"},o.a.createElement("strong",null,"Genre:"),t.Genre),o.a.createElement("p",{className:"mb-auto"},o.a.createElement("strong",null,"Director:"),t.Director),o.a.createElement("div",{className:"mt-auto"},n.map(function(e,t){return o.a.createElement("button",{key:t,type:"button",className:"btn btn-primary ".concat(e.classname),onClick:e.handler},e.text)}))))},D=n(7),S=function(e){function t(){return Object(O.a)(this,t),Object(N.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.toggle,a=e.children,r=e.title,l=e.footer,c=l.action,i=l.actionText,s=!!c;return o.a.createElement("div",null,o.a.createElement(D.b,{isOpen:t,toggle:n,className:this.props.className},o.a.createElement(D.e,{toggle:n},r||"Modal title"),o.a.createElement(D.c,null,a),o.a.createElement(D.d,null,s&&o.a.createElement("div",null,o.a.createElement(D.a,{color:"primary",onClick:l.action},i)," ",o.a.createElement(D.a,{color:"secondary",onClick:n},"Cancel")),s||o.a.createElement(D.a,{color:"secondary",onClick:n},"Close"))))}}]),t}(a.Component),I=n(18),A=n.n(I),_=function(e){var t=A()(e.trim(),"YYYY",!0),n=t.isBefore(A()()),a=t.isAfter(A()(1924,"YYYY",!0));return!(!n||!a)},R=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(N.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(o)))).state={toggle:{editMode:!1,deleteMode:!1,addMode:!1},selectedMovie:{},errorText:""},n.handleAction=function(e,t){var a=["editMode","deleteMode","addMode"].find(function(t){return t===e}),o="addMode"===a?void 0:n.props.movies[t],r="addMode"===a?void 0:t;n.setState({toggle:Object(y.a)({},n.state.toggle,Object(w.a)({},a,!0)),selectedMovie:o,selectedMovieId:r})},n.toggle=function(e){n.setState({toggle:Object(y.a)({},n.state.toggle,Object(w.a)({},e,!n.state.toggle[e])),errorText:""})},n.handleChange=function(e){var t=e.target.value,a=e.target.name,o="";""===t?o="empty fields are not allowed!":"Year"===a&&(_(t)||(o="It Must be a valid year")),n.setState({selectedMovie:Object(y.a)({},n.state.selectedMovie,Object(w.a)({},a,t)),errorText:o})},n.updateMovies=function(e){var t=n.props,a=t.updateMovies,o=t.movies,r=n.state,l=r.selectedMovie,c=void 0===l?{}:l,i=r.selectedMovieId;if(r.errorText)return!1;var s=Object(M.a)(o);if("deleteMode"!==e){for(var d=["Title","Year","Runtime","Genre","Director"],u=0;u<d.length;u++){if(!c[d[u]])return n.setState({errorText:"empty fields are not allowed!"}),!1}if(!_(c.Year))return n.setState({errorText:"It Must be a valid year"}),!1;if(s.find(function(e){return 0===c.Title.localeCompare(e.Title,"en",{sensitivity:"base"})}))return n.setState({errorText:"Movie exist, Please choose another Title."}),!1}"deleteMode"===e&&s.splice(i,1),"editMode"===e&&(s[i]=c),"addMode"===e&&s.unshift(c),n.setState({selectedMovie:void 0,selectedMovieId:void 0}),a(s),n.toggle(e)},n}return Object(T.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.fetchMovies)()}},{key:"render",value:function(){var e=this,t=this.props.movies,n=this.state,a=n.toggle,r=n.selectedMovie,l=void 0===r?{}:r,c=n.errorText,i=n.selectedMovieId,s=a.editMode,d=a.deleteMode,u=a.addMode,m={action:function(){return e.updateMovies("deleteMode")},actionText:"OK"},v=void 0!==i?s:u,f=void 0!==i?{action:function(){return e.updateMovies("editMode")},actionText:"Save"}:{action:function(){return e.updateMovies("addMode")},actionText:"OK"},p=void 0!==i?"editMode":"addMode";return o.a.createElement("div",{className:"App row flex-column flex-sm-row m-auto"},o.a.createElement("button",{className:"btn btn-link",type:"button",onClick:function(){return e.handleAction("addMode")}},"Add New Movie"),t&&t.map(function(t,n){return o.a.createElement(Y,{key:n,movie:t,onEdit:function(){return e.handleAction("editMode",n)},onDelete:function(){return e.handleAction("deleteMode",n)}})}),o.a.createElement(S,{isOpen:v,toggle:function(){return e.toggle(p)},footer:f},o.a.createElement("form",null,o.a.createElement("div",{className:"form-row"},o.a.createElement("label",{className:"col"},"Title:",o.a.createElement("input",{className:"form-control",type:"text",name:"Title",value:l.Title||"",onChange:this.handleChange})),o.a.createElement("label",{className:"col"},"Year:",o.a.createElement("input",{className:"form-control",type:"text",name:"Year",value:l.Year||"",onChange:this.handleChange}))),o.a.createElement("div",{className:"form-row"},o.a.createElement("label",{className:"col"},"Runtime:",o.a.createElement("input",{className:"form-control",type:"text",name:"Runtime",value:l.Runtime||"",onChange:this.handleChange})),o.a.createElement("label",{className:"col"},"Genre:",o.a.createElement("input",{className:"form-control",type:"text",name:"Genre",value:l.Genre||"",onChange:this.handleChange}))),o.a.createElement("label",null,"Director:",o.a.createElement("input",{className:"form-control",type:"text",name:"Director",value:l.Director||"",onChange:this.handleChange})),o.a.createElement("div",{className:"form-row"},c&&o.a.createElement("div",{className:"m-0 alert alert-danger"},c),o.a.createElement("div",{className:"m-0 alert"},"\xa0")))),o.a.createElement(S,{isOpen:d,toggle:function(){return e.toggle("deleteMode")},footer:m},"Are you sure you want to delete this movie?"))}}]),t}(a.Component),$=Object(c.b)(function(e){return{movies:e.movies}},function(e){return{fetchMovies:function(){return e(k())},updateMovies:function(t){return e(function(e){return function(t){t(j(e))}}(t))}}})(R),G=function(e){return o.a.createElement(g.a,null,o.a.createElement("div",null,o.a.createElement(E.a,null,o.a.createElement(b.a,{path:"/",component:$,exact:!0}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=Object(i.d)(p,h(Object(i.a)(s.a))),U=o.a.createElement(c.a,{store:P},o.a.createElement(G,null));l.a.render(U,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,2,1]]]);
//# sourceMappingURL=main.b0e94b45.chunk.js.map